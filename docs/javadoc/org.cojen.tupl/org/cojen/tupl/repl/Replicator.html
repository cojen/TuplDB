<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>Replicator (Tupl 1.6.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: org.cojen.tupl, package: org.cojen.tupl.repl, interface: Replicator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Replicator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../module-summary.html">org.cojen.tupl</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.cojen.tupl.repl</a></div>
<h1 title="Interface Replicator" class="title">Interface Replicator</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code></dd>
</dl>
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="MessageReplicator.html" title="interface in org.cojen.tupl.repl">MessageReplicator</a></code>, <code><a href="StreamReplicator.html" title="interface in org.cojen.tupl.repl">StreamReplicator</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">Replicator</span><span class="extends-implements">
extends <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></span></div>
<div class="block">Defines common features available to all types of replicators.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Replicator.Accessor.html" class="type-name-link" title="interface in org.cojen.tupl.repl">Replicator.Accessor</a></code></div>
<div class="col-last even-row-color">
<div class="block">Direct interface for accessing replication data, for a given term.</div>
</div>
<div class="col-first odd-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="Replicator.Reader.html" class="type-name-link" title="interface in org.cojen.tupl.repl">Replicator.Reader</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Direct interface for reading from a replicator, for a given term.</div>
</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Replicator.Writer.html" class="type-name-link" title="interface in org.cojen.tupl.repl">Replicator.Writer</a></code></div>
<div class="col-last even-row-color">
<div class="block">Direct interface for writing to a replicator, for a given term.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#commitPosition()" class="member-name-link">commitPosition</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the highest observed commit position overall.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#compact(long)" class="member-name-link">compact</a><wbr>(long&nbsp;position)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Permit all data lower than the given position to be deleted, freeing up space in the log.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/Socket.html" title="class or interface in java.net" class="external-link">Socket</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#connect(java.net.SocketAddress)" class="member-name-link">connect</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/SocketAddress.html" title="class or interface in java.net" class="external-link">SocketAddress</a>&nbsp;addr)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Connect to any replication group member, for any particular use.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#encoding()" class="member-name-link">encoding</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Return a constant non-zero value which identifies the replicator implementation and its
 encoding format.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#failover()" class="member-name-link">failover</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Attempt to switch the replication role from leader to replica.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isReadable(long)" class="member-name-link">isReadable</a><wbr>(long&nbsp;position)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if committed data exists at the given position.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/SocketAddress.html" title="class or interface in java.net" class="external-link">SocketAddress</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#localAddress()" class="member-name-link">localAddress</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#localMemberId()" class="member-name-link">localMemberId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Role.html" title="enum class in org.cojen.tupl.repl">Role</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#localRole()" class="member-name-link">localRole</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the effective local role, as known by the group.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Replicator.Reader.html" title="interface in org.cojen.tupl.repl">Replicator.Reader</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#newReader(long,boolean)" class="member-name-link">newReader</a><wbr>(long&nbsp;position,
 boolean&nbsp;follow)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a new reader which accesses data starting from the given position.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Replicator.Writer.html" title="interface in org.cojen.tupl.repl">Replicator.Writer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#newWriter()" class="member-name-link">newWriter</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a new writer for the leader to write into, or else returns null if the local
 member isn't the leader.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Replicator.Writer.html" title="interface in org.cojen.tupl.repl">Replicator.Writer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#newWriter(long)" class="member-name-link">newWriter</a><wbr>(long&nbsp;position)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a new writer for the leader to write into, or else returns null if the local
 member isn't the leader.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="SnapshotReceiver.html" title="interface in org.cojen.tupl.repl">SnapshotReceiver</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#requestSnapshot(java.util.Map)" class="member-name-link">requestSnapshot</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Connect to a remote replication group member, for receiving a database snapshot.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="SnapshotReceiver.html" title="interface in org.cojen.tupl.repl">SnapshotReceiver</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#restore(java.util.Map)" class="member-name-link">restore</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Start by receiving a <a href="#requestSnapshot(java.util.Map)">snapshot</a> from another group member,
 expected to be called only by newly joined members.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#snapshotRequestAcceptor(java.util.function.Consumer)" class="member-name-link">snapshotRequestAcceptor</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="SnapshotSender.html" title="interface in org.cojen.tupl.repl">SnapshotSender</a>&gt;&nbsp;acceptor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Install a callback to be invoked when a snapshot is requested by a new group member.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#socketAcceptor(java.util.function.Consumer)" class="member-name-link">socketAcceptor</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/Socket.html" title="class or interface in java.net" class="external-link">Socket</a>&gt;&nbsp;acceptor)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Install a callback to be invoked when plain connections are established to the local
 group member.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#start()" class="member-name-link">start</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Start accepting replication data, to be called for new or existing members.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sync()" class="member-name-link">sync</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Durably persist all data up to the highest position.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#syncCommit(long,long)" class="member-name-link">syncCommit</a><wbr>(long&nbsp;position,
 long&nbsp;nanosTimeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns immediately if all data up to the given committed position is durable, or else
 durably persists all data up to the highest position.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.io.Closeable">Methods inherited from interface&nbsp;java.io.<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/Closeable.html#close()" title="class or interface in java.io" class="external-link">close</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="encoding()">
<h3>encoding</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">encoding</span>()</div>
<div class="block">Return a constant non-zero value which identifies the replicator implementation and its
 encoding format. Value should be chosen randomly, so as not to collide with other
 implementations.</div>
</section>
</li>
<li>
<section class="detail" id="start()">
<h3>start</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">start</span>()
    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Start accepting replication data, to be called for new or existing members. For newly
 restored members, the start method must be called to update its role.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="restore(java.util.Map)">
<h3>restore</h3>
<div class="member-signature"><span class="return-type"><a href="SnapshotReceiver.html" title="interface in org.cojen.tupl.repl">SnapshotReceiver</a></span>&nbsp;<span class="element-name">restore</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Start by receiving a <a href="#requestSnapshot(java.util.Map)">snapshot</a> from another group member,
 expected to be called only by newly joined members. New members are initially
 <a href="Role.html#RESTORING">restoring</a>, so call the start method after restoration to
 update the role.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - requested options; can pass null if none</dd>
<dt>Returns:</dt>
<dd>null if no snapshot could be found and replicator hasn't started</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/ConnectException.html" title="class or interface in java.net" class="external-link">ConnectException</a></code> - if a snapshot was found, but requesting it failed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if already started</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="requestSnapshot(java.util.Map)">
<h3>requestSnapshot</h3>
<div class="member-signature"><span class="return-type"><a href="SnapshotReceiver.html" title="interface in org.cojen.tupl.repl">SnapshotReceiver</a></span>&nbsp;<span class="element-name">requestSnapshot</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Connect to a remote replication group member, for receiving a database snapshot. An
 <a href="#snapshotRequestAcceptor(java.util.function.Consumer)">acceptor</a> must be installed on the group member
 being connected to for the request to succeed.
 
 <p>The sender is selected as the one which has the fewest count of active snapshot
 sessions. If all the counts are the same, then a sender is instead randomly selected,
 favoring a follower over a leader.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - requested options; can pass null if none</dd>
<dt>Returns:</dt>
<dd>null if no snapshot could be found</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/ConnectException.html" title="class or interface in java.net" class="external-link">ConnectException</a></code> - if a snapshot was found, but requesting it failed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="snapshotRequestAcceptor(java.util.function.Consumer)">
<h3>snapshotRequestAcceptor</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">snapshotRequestAcceptor</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="SnapshotSender.html" title="interface in org.cojen.tupl.repl">SnapshotSender</a>&gt;&nbsp;acceptor)</span></div>
<div class="block">Install a callback to be invoked when a snapshot is requested by a new group member.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>acceptor</code> - acceptor to use, or pass null to disable</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isReadable(long)">
<h3>isReadable</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isReadable</span><wbr><span class="parameters">(long&nbsp;position)</span></div>
<div class="block">Returns true if committed data exists at the given position.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if replicator is closed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newReader(long,boolean)">
<h3>newReader</h3>
<div class="member-signature"><span class="return-type"><a href="Replicator.Reader.html" title="interface in org.cojen.tupl.repl">Replicator.Reader</a></span>&nbsp;<span class="element-name">newReader</span><wbr><span class="parameters">(long&nbsp;position,
 boolean&nbsp;follow)</span></div>
<div class="block">Returns a new reader which accesses data starting from the given position. The reader
 returns EOF whenever the end of a term is reached. At the end of a term, try to obtain a
 new writer to determine if the local member has become the leader.

 <p>When passing true for the follow parameter, a reader is always provided at the
 requested position. When passing false for the follow parameter, null is returned if the
 current member is the leader for the given position.

 <p><b>Note: Reader instances are not expected to be thread-safe.</b></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>position</code> - position to start reading from, known to have been committed</dd>
<dd><code>follow</code> - pass true to obtain an active reader, even if local member is the leader</dd>
<dt>Returns:</dt>
<dd>reader or possibly null when follow is false</dd>
<dt>Throws:</dt>
<dd><code><a href="InvalidReadException.html" title="class in org.cojen.tupl.repl">InvalidReadException</a></code> - if position is lower than the start position, or if
 position is higher than the commit position</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if replicator is closed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newWriter()">
<h3>newWriter</h3>
<div class="member-signature"><span class="return-type"><a href="Replicator.Writer.html" title="interface in org.cojen.tupl.repl">Replicator.Writer</a></span>&nbsp;<span class="element-name">newWriter</span>()</div>
<div class="block">Returns a new writer for the leader to write into, or else returns null if the local
 member isn't the leader. The writer stops accepting messages when the term has ended,
 and possibly another leader has been elected.

 <p><b>Note: Writer instances are not expected to be thread-safe.</b></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>writer or null if not the leader</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if an existing writer for the current term already exists</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newWriter(long)">
<h3>newWriter</h3>
<div class="member-signature"><span class="return-type"><a href="Replicator.Writer.html" title="interface in org.cojen.tupl.repl">Replicator.Writer</a></span>&nbsp;<span class="element-name">newWriter</span><wbr><span class="parameters">(long&nbsp;position)</span></div>
<div class="block">Returns a new writer for the leader to write into, or else returns null if the local
 member isn't the leader. The writer stops accepting messages when the term has ended,
 and possibly another leader has been elected.

 <p><b>Note: Writer instances are not expected to be thread-safe.</b></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>position</code> - expected position to start writing from as leader; method returns null
 if the given position is lower</dd>
<dt>Returns:</dt>
<dd>writer or null if not the leader</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the given position is negative</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if an existing writer for the current term already exists</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="syncCommit(long,long)">
<h3>syncCommit</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">syncCommit</span><wbr><span class="parameters">(long&nbsp;position,
 long&nbsp;nanosTimeout)</span>
            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns immediately if all data up to the given committed position is durable, or else
 durably persists all data up to the highest position.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>position</code> - committed position required to be durable</dd>
<dd><code>nanosTimeout</code> - relative nanosecond time to wait; infinite if &lt;0</dd>
<dt>Returns:</dt>
<dd>false if timed out</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if position is too high</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="compact(long)">
<h3>compact</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">compact</span><wbr><span class="parameters">(long&nbsp;position)</span>
      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Permit all data lower than the given position to be deleted, freeing up space in the log.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>position</code> - lowest position which must be retained</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitPosition()">
<h3>commitPosition</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">commitPosition</span>()</div>
<div class="block">Returns the highest observed commit position overall. This commit position might be
 higher than what can be currently applied, if gaps exist in the log.</div>
</section>
</li>
<li>
<section class="detail" id="localMemberId()">
<h3>localMemberId</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">localMemberId</span>()</div>
</section>
</li>
<li>
<section class="detail" id="localAddress()">
<h3>localAddress</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/SocketAddress.html" title="class or interface in java.net" class="external-link">SocketAddress</a></span>&nbsp;<span class="element-name">localAddress</span>()</div>
</section>
</li>
<li>
<section class="detail" id="localRole()">
<h3>localRole</h3>
<div class="member-signature"><span class="return-type"><a href="Role.html" title="enum class in org.cojen.tupl.repl">Role</a></span>&nbsp;<span class="element-name">localRole</span>()</div>
<div class="block">Returns the effective local role, as known by the group. Changes to the role don't
 become effective until proposed by the leader, committed, and then applied.</div>
</section>
</li>
<li>
<section class="detail" id="connect(java.net.SocketAddress)">
<h3>connect</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/Socket.html" title="class or interface in java.net" class="external-link">Socket</a></span>&nbsp;<span class="element-name">connect</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/SocketAddress.html" title="class or interface in java.net" class="external-link">SocketAddress</a>&nbsp;addr)</span>
        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Connect to any replication group member, for any particular use. An <a href="#socketAcceptor(java.util.function.Consumer)">acceptor</a> must be installed on the group member being connected to for
 the connect to succeed.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if address is null</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/ConnectException.html" title="class or interface in java.net" class="external-link">ConnectException</a></code> - if not given a member address or if the connect fails</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="socketAcceptor(java.util.function.Consumer)">
<h3>socketAcceptor</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">socketAcceptor</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/net/Socket.html" title="class or interface in java.net" class="external-link">Socket</a>&gt;&nbsp;acceptor)</span></div>
<div class="block">Install a callback to be invoked when plain connections are established to the local
 group member. No new connections are accepted (of any type) until the callback returns.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>acceptor</code> - acceptor to use, or pass null to disable</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="sync()">
<h3>sync</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">sync</span>()
   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Durably persist all data up to the highest position. The highest term, the highest
 position, and the commit position are all recovered when reopening the
 replicator. Incomplete data beyond this is discarded.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="failover()">
<h3>failover</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">failover</span>()
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Attempt to switch the replication role from leader to replica. If successful, or if
 already a replica, true is returned. When false is returned, the role is likely still
 the leader, possibly because no replicas exist to failover to.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2011&#x2013;2022 <a href="https://github.com/cojen">Cojen</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
